diff --git a/javascript/net/grpc/web/generator/grpc_generator.cc b/javascript/net/grpc/web/generator/grpc_generator.cc
index 5695f31..52eec82 100644
--- a/javascript/net/grpc/web/generator/grpc_generator.cc
+++ b/javascript/net/grpc/web/generator/grpc_generator.cc
@@ -28,6 +28,7 @@
 #include <iterator>
 #include <set>
 #include <string>
+#include <string_view>
 
 using google::protobuf::Descriptor;
 using google::protobuf::Edition;
@@ -132,7 +133,8 @@ std::string GetSerializeMethodReturnType(std::map<string, string> vars) {
   return "!Uint8Array";
 }
 
-string LowercaseFirstLetter(string s) {
+string LowercaseFirstLetter(std::string_view sv) {
+  string s(sv);
   if (s.empty()) {
     return s;
   }
@@ -140,7 +142,8 @@ string LowercaseFirstLetter(string s) {
   return s;
 }
 
-string Lowercase(string s) {
+string Lowercase(std::string_view sv) {
+  string s(sv);
   if (s.empty()) {
     return s;
   }
@@ -151,7 +154,8 @@ string Lowercase(string s) {
   return s;
 }
 
-string UppercaseFirstLetter(string s) {
+string UppercaseFirstLetter(std::string_view sv) {
+  string s(sv);
   if (s.empty()) {
     return s;
   }
@@ -159,7 +163,8 @@ string UppercaseFirstLetter(string s) {
   return s;
 }
 
-string Uppercase(string s) {
+string Uppercase(std::string_view sv) {
+  string s(sv);
   if (s.empty()) {
     return s;
   }
@@ -173,35 +178,35 @@ string Uppercase(string s) {
 // The following 5 functions were copied from
 // google/protobuf/src/google/protobuf/stubs/strutil.h
 
-inline bool HasPrefixString(const string& str, const string& prefix) {
+inline bool HasPrefixString(std::string_view str, std::string_view prefix) {
   return str.size() >= prefix.size() &&
          str.compare(0, prefix.size(), prefix) == 0;
 }
 
 // Strips the given prefix from the string, as well as the remaining leading dot
 // if it exists.
-inline string StripPrefixString(const string& str, const string& prefix) {
+inline string StripPrefixString(std::string_view str, std::string_view prefix) {
   if (!HasPrefixString(str, prefix)) {
-    return str;
+    return string(str);
   }
 
-  string remaining_str = str.substr(prefix.size());
+  string remaining_str(str.substr(prefix.size()));
   if (!remaining_str.empty() && remaining_str[0] == '.') {
     remaining_str = remaining_str.substr(1);
   }
   return remaining_str;
 }
 
-inline bool HasSuffixString(const string& str, const string& suffix) {
+inline bool HasSuffixString(std::string_view str, std::string_view suffix) {
   return str.size() >= suffix.size() &&
          str.compare(str.size() - suffix.size(), suffix.size(), suffix) == 0;
 }
 
-inline string StripSuffixString(const string& str, const string& suffix) {
+inline string StripSuffixString(std::string_view str, std::string_view suffix) {
   if (HasSuffixString(str, suffix)) {
-    return str.substr(0, str.size() - suffix.size());
+    return string(str.substr(0, str.size() - suffix.size()));
   } else {
-    return str;
+    return string(str);
   }
 }
 
@@ -217,7 +222,7 @@ void ReplaceCharacters(string* s, const char* remove, char replacewith) {
 // The following function was copied from
 // google/protobuf/src/google/protobuf/compiler/cpp/cpp_helpers.cc
 
-string StripProto(const string& filename) {
+string StripProto(std::string_view filename) {
   if (HasSuffixString(filename, ".protodevel")) {
     return StripSuffixString(filename, ".protodevel");
   } else {
@@ -236,7 +241,7 @@ char ToLowerASCII(char c) {
   }
 }
 
-std::vector<string> ParseLowerUnderscore(const string& input) {
+std::vector<string> ParseLowerUnderscore(std::string_view input) {
   std::vector<string> words;
   string running = "";
   for (size_t i = 0; i < input.size(); i++) {
@@ -269,7 +274,7 @@ string ToUpperCamel(const std::vector<string>& words) {
 
 // Returns the alias we assign to the module of the given .proto filename
 // when importing.
-string ModuleAlias(const string& filename) {
+string ModuleAlias(std::string_view filename) {
   // This scheme could technically cause problems if a file includes any 2 of:
   //   foo/bar_baz.proto
   //   foo_bar_baz.proto
@@ -433,7 +438,7 @@ string GetNestedMessageName(const Descriptor* descriptor) {
 
 // Given a filename like foo/bar/baz.proto, returns the root directory
 // path ../../
-string GetRootPath(const string& from_filename, const string& to_filename) {
+string GetRootPath(std::string_view from_filename, std::string_view to_filename) {
   if (HasPrefixString(to_filename, "google/protobuf")) {
     // Well-known types (.proto files in the google/protobuf directory) are
     // assumed to come from the 'google-protobuf' npm package.  We may want to
@@ -494,8 +499,8 @@ std::map<string, const Descriptor*> GetAllMessages(const FileDescriptor* file) {
     const ServiceDescriptor* service = file->service(s);
     for (int m = 0; m < service->method_count(); ++m) {
       const MethodDescriptor* method = service->method(m);
-      messages[method->input_type()->full_name()] = method->input_type();
-      messages[method->output_type()->full_name()] = method->output_type();
+      messages[string(method->input_type()->full_name())] = method->input_type();
+      messages[string(method->output_type()->full_name())] = method->output_type();
     }
   }
 
@@ -513,14 +518,14 @@ void PrintCommonJsMessagesDeps(Printer* printer, const FileDescriptor* file) {
   std::map<string, string> vars;
 
   for (int i = 0; i < file->dependency_count(); i++) {
-    const string& name = file->dependency(i)->name();
+    const string name(file->dependency(i)->name());
     vars["alias"] = ModuleAlias(name);
     vars["dep_filename"] = GetRootPath(file->name(), name) + StripProto(name);
     // we need to give each cross-file import an alias
     printer->Print(vars, "\nvar $alias$ = require('$dep_filename$_pb.js')\n");
   }
 
-  const string& package = file->package();
+  const string package(file->package());
   vars["package_name"] = package;
 
   if (!package.empty()) {
@@ -556,7 +561,7 @@ void PrintES6Imports(Printer* printer, const FileDescriptor* file) {
 
   std::set<string> imports;
   for (const auto& entry : GetAllMessages(file)) {
-    const string& proto_filename = entry.second->file()->name();
+    const string proto_filename(entry.second->file()->name());
     string dep_filename = GetRootPath(file->name(), proto_filename) + StripProto(proto_filename);
     if (imports.find(dep_filename) != imports.end()) {
       continue;
@@ -578,7 +583,7 @@ void PrintTypescriptFile(Printer* printer, const FileDescriptor* file,
        ++service_index) {
     printer->Print("export class ");
     const ServiceDescriptor* service = file->service(service_index);
-    vars["service_name"] = service->name();
+    vars["service_name"] = string(service->name());
     printer->Print(vars, "$service_name$Client {\n");
     printer->Indent();
     printer->Print(
@@ -607,7 +612,7 @@ void PrintTypescriptFile(Printer* printer, const FileDescriptor* file,
          ++method_index) {
       const MethodDescriptor* method = service->method(method_index);
       vars["js_method_name"] = LowercaseFirstLetter(method->name());
-      vars["method_name"] = method->name();
+      vars["method_name"] = string(method->name());
       vars["input_type"] = JSMessageType(method->input_type());
       vars["output_type"] = JSMessageType(method->output_type());
       vars["serialize_func_name"] = GetSerializeMethodName(vars);
@@ -716,7 +721,7 @@ void PrintGrpcWebDtsClientClass(Printer* printer, const FileDescriptor* file,
        ++service_index) {
     printer->Print("export class ");
     const ServiceDescriptor* service = file->service(service_index);
-    vars["service_name"] = service->name();
+    vars["service_name"] = string(service->name());
     printer->Print(vars, "$service_name$$client_type$ {\n");
     printer->Indent();
     printer->Print(
@@ -777,7 +782,7 @@ void PrintGrpcWebDtsFile(Printer* printer, const FileDescriptor* file) {
 
 void PrintProtoDtsEnum(Printer* printer, const EnumDescriptor* desc) {
   std::map<string, string> vars;
-  vars["enum_name"] = desc->name();
+  vars["enum_name"] = string(desc->name());
 
   // Use regular enums for broad TypeScript compatibility. `const enum`
   // triggers TS2748 when `verbatimModuleSyntax` is enabled (default in
@@ -815,7 +820,7 @@ void PrintProtoDtsOneofCase(Printer* printer, const OneofDescriptor* desc) {
 
 void PrintProtoDtsMessage(Printer* printer, const Descriptor* desc,
                           const FileDescriptor* file) {
-  const string& class_name = desc->name();
+  const string class_name(desc->name());
   std::map<string, string> vars;
   vars["class_name"] = class_name;
 
@@ -941,7 +946,7 @@ void PrintProtoDtsFile(Printer* printer, const FileDescriptor* file) {
   printer->Print("import * as jspb from 'google-protobuf'\n\n");
 
   for (int i = 0; i < file->dependency_count(); i++) {
-    const string& proto_filename = file->dependency(i)->name();
+    const string proto_filename(file->dependency(i)->name());
     // We need to give each cross-file import an alias.
     printer->Print("import * as $alias$ from '$dep_filename$_pb'; // proto import: \"$proto_filename$\"\n",
                    "alias", ModuleAlias(proto_filename),
@@ -1241,7 +1246,7 @@ void PrintMultipleFilesMode(const FileDescriptor* file, string file_name,
   // Print MethodDescriptor files.
   for (int i = 0; i < file->service_count(); ++i) {
     const ServiceDescriptor* service = file->service(i);
-    vars["service_name"] = service->name();
+    vars["service_name"] = string(service->name());
     vars["class_name"] = LowercaseFirstLetter(service->name());
 
     for (int method_index = 0; method_index < service->method_count();
@@ -1257,17 +1262,17 @@ void PrintMultipleFilesMode(const FileDescriptor* file, string file_name,
           context->Open(method_file_name));
       Printer printer(output.get(), '$');
 
-      vars["method_name"] = method->name();
-      vars["in"] = method->input_type()->full_name();
-      vars["in_type"] = "proto." + method->input_type()->full_name();
-      vars["out"] = method->output_type()->full_name();
-      vars["out_type"] = "proto." + method->output_type()->full_name();
+      vars["method_name"] = string(method->name());
+      vars["in"] = string(method->input_type()->full_name());
+      vars["in_type"] = "proto." + string(method->input_type()->full_name());
+      vars["out"] = string(method->output_type()->full_name());
+      vars["out_type"] = "proto." + string(method->output_type()->full_name());
       vars["method_type"] = method->server_streaming()
                                 ? "grpc.web.MethodType.SERVER_STREAMING"
                                 : "grpc.web.MethodType.UNARY";
 
       PrintMethodDescriptorFile(&printer, vars);
-      method_descriptors[service->name() + "." + method->name()] =
+      method_descriptors[string(service->name()) + "." + string(method->name())] =
           "proto." + vars["package_dot"] + vars["class_name"] + "." +
           vars["method_name"] + "MethodDescriptor";
     }
@@ -1286,7 +1291,7 @@ void PrintMultipleFilesMode(const FileDescriptor* file, string file_name,
   // Print the Promise and callback client.
   for (int i = 0; i < file->service_count(); ++i) {
     const ServiceDescriptor* service = file->service(i);
-    vars["service_name"] = service->name();
+    vars["service_name"] = string(service->name());
     printer1.Print(vars,
                    "goog.provide('proto.$package_dot$$service_name$"
                    "Client');\n\n");
@@ -1326,7 +1331,7 @@ void PrintMultipleFilesMode(const FileDescriptor* file, string file_name,
   for (int service_index = 0; service_index < file->service_count();
        ++service_index) {
     const ServiceDescriptor* service = file->service(service_index);
-    vars["service_name"] = service->name();
+    vars["service_name"] = string(service->name());
     PrintServiceConstructor(&printer1, vars, false);
     PrintServiceConstructor(&printer2, vars, true);
 
@@ -1336,13 +1341,13 @@ void PrintMultipleFilesMode(const FileDescriptor* file, string file_name,
       const Descriptor* input_type = method->input_type();
       const Descriptor* output_type = method->output_type();
       vars["js_method_name"] = LowercaseFirstLetter(method->name());
-      vars["method_name"] = method->name();
-      vars["in"] = input_type->full_name();
-      vars["out"] = output_type->full_name();
+      vars["method_name"] = string(method->name());
+      vars["in"] = string(input_type->full_name());
+      vars["out"] = string(output_type->full_name());
       vars["method_descriptor"] =
-          method_descriptors[service->name() + "." + method->name()];
-      vars["in_type"] = "proto." + input_type->full_name();
-      vars["out_type"] = "proto." + output_type->full_name();
+          method_descriptors[string(service->name()) + "." + string(method->name())];
+      vars["in_type"] = "proto." + string(input_type->full_name());
+      vars["out_type"] = "proto." + string(output_type->full_name());
 
       // Client streaming is not supported yet
       if (!method->client_streaming()) {
@@ -1369,14 +1374,14 @@ void PrintClosureES6Imports(Printer* printer, const FileDescriptor* file,
   for (int i = 0; i < file->service_count(); ++i) {
     const ServiceDescriptor* service = file->service(i);
 
-    string service_namespace = "proto." + package_dot + service->name();
+    string service_namespace = "proto." + package_dot + string(service->name());
     printer->Print(
         "import $service_name$Client_import from 'goog:$namespace$';\n",
-        "service_name", service->name(), "namespace",
+        "service_name", string(service->name()), "namespace",
         service_namespace + "Client");
     printer->Print(
         "import $service_name$PromiseClient_import from 'goog:$namespace$';\n",
-        "service_name", service->name(), "namespace",
+        "service_name", string(service->name()), "namespace",
         service_namespace + "PromiseClient");
   }
 
@@ -1384,7 +1389,7 @@ void PrintClosureES6Imports(Printer* printer, const FileDescriptor* file,
 }
 
 void PrintGrpcWebClosureES6File(Printer* printer, const FileDescriptor* file) {
-  string package_dot = file->package().empty() ? "" : file->package() + ".";
+  string package_dot = file->package().empty() ? "" : string(file->package()) + ".";
 
   printer->Print(
       "/**\n"
@@ -1405,12 +1410,12 @@ void PrintGrpcWebClosureES6File(Printer* printer, const FileDescriptor* file) {
   for (int i = 0; i < file->service_count(); ++i) {
     const ServiceDescriptor* service = file->service(i);
 
-    string service_namespace = "proto." + package_dot + service->name();
+    string service_namespace = "proto." + package_dot + string(service->name());
     printer->Print("export const $name$Client = $name$Client_import;\n", "name",
-                   service->name());
+                   string(service->name()));
     printer->Print(
         "export const $name$PromiseClient = $name$PromiseClient_import;\n",
-        "name", service->name());
+        "name", string(service->name()));
   }
 }
 
@@ -1544,7 +1549,7 @@ class GrpcCodeGenerator : public CodeGenerator {
 
     std::map<string, string> vars;
     std::map<string, string> method_descriptors;
-    string package = file->package();
+    string package(file->package());
     vars["package"] = package;
     vars["package_dot"] = package.empty() ? "" : package + '.';
     vars["promise"] = "Promise";
@@ -1585,9 +1590,9 @@ class GrpcCodeGenerator : public CodeGenerator {
 
     vars["version"]        = GRPC_WEB_VERSION;
     vars["protoc_version"] = GetProtocVersion(context);
-    vars["source_file"]    = file->name();
+    vars["source_file"]    = string(file->name());
 
-    string file_name = generator_options.OutputFile(file->name());
+    string file_name = generator_options.OutputFile(string(file->name()));
     if (generator_options.multiple_files() &&
         ImportStyle::CLOSURE == generator_options.import_style()) {
       PrintMultipleFilesMode(file, file_name, context, vars);
@@ -1605,7 +1610,7 @@ class GrpcCodeGenerator : public CodeGenerator {
 
     for (int i = 0; i < file->service_count(); ++i) {
       const ServiceDescriptor* service = file->service(i);
-      vars["service_name"] = service->name();
+      vars["service_name"] = string(service->name());
       switch (generator_options.import_style()) {
         case ImportStyle::CLOSURE:
           printer.Print(
@@ -1652,7 +1657,7 @@ class GrpcCodeGenerator : public CodeGenerator {
     for (int service_index = 0; service_index < file->service_count();
          ++service_index) {
       const ServiceDescriptor* service = file->service(service_index);
-      vars["service_name"] = service->name();
+      vars["service_name"] = string(service->name());
       PrintServiceConstructor(&printer, vars, false);
       PrintServiceConstructor(&printer, vars, true);
 
@@ -1662,11 +1667,11 @@ class GrpcCodeGenerator : public CodeGenerator {
         const Descriptor* input_type = method->input_type();
         const Descriptor* output_type = method->output_type();
         vars["js_method_name"] = LowercaseFirstLetter(method->name());
-        vars["method_name"] = method->name();
-        vars["in"] = input_type->full_name();
-        vars["out"] = output_type->full_name();
+        vars["method_name"] = string(method->name());
+        vars["in"] = string(input_type->full_name());
+        vars["out"] = string(output_type->full_name());
         vars["method_descriptor"] =
-            "methodDescriptor_" + service->name() + "_" + method->name();
+            "methodDescriptor_" + string(service->name()) + "_" + string(method->name());
 
         // Cross-file ref in CommonJS needs to use the module alias instead
         // of the global name.
@@ -1675,14 +1680,14 @@ class GrpcCodeGenerator : public CodeGenerator {
           vars["in_type"] = ModuleAlias(input_type->file()->name()) +
                             GetNestedMessageName(input_type);
         } else {
-          vars["in_type"] = "proto." + input_type->full_name();
+          vars["in_type"] = "proto." + string(input_type->full_name());
         }
         if (ImportStyle::COMMONJS == generator_options.import_style() &&
             output_type->file() != file) {
           vars["out_type"] = ModuleAlias(output_type->file()->name()) +
                              GetNestedMessageName(output_type);
         } else {
-          vars["out_type"] = "proto." + output_type->full_name();
+          vars["out_type"] = "proto." + string(output_type->full_name());
         }
 
         // Client streaming is not supported yet
